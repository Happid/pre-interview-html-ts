<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>This Binding</title>
</head>
<body>
    <h2>this adalah konteks eksekusi yang tergantung bagaimana function dipanggil</h2>


    <h3>1. this di Global Scope</h3>
    <pre style="background: black; color: white;">
        <code>
            console.log(this); // Window { ... }

            var a = 10;
            console.log("Variable Declaration (var) => ", this.a); // 10

            let b = 20;
            console.log("Variable Declaration (let) => ", this.b); // undefined
        </code>
    </pre>

    <h3>2. this di Object Method</h3>
    <pre style="background: black; color: white;">
        <code>
            // METHOD 1
            const user = {
                name: "Happid",
                sayHi() {
                    console.log("Method 1 => ",this.name);
                }
            };
            user.sayHi(); // "Happid"

            // METHOD 2
            const animal = {
                type: "cat",
                sayHi() {
                    setTimeout(function() {
                        console.log("Method 2 => ",this.type);
                    }, 1000);
                }
            };
            animal.sayHi(); // undefined
        </code>
    </pre>

    <h3>3. this di Class</h3>
    <pre style="background: black; color: white;">
        <code>
            // CLASS 1
            class Person {
                constructor(name) {
                    this.name = name;
                }

                sayHello() {
                    console.log("Hello, I'm " + this.name);
                }
            }
            const p = new Person("Happid");
            p.sayHello(); // "Hi, I'm Happid"


            // CLASS 2
            class Counter {
                constructor() {
                    this.count = 0;
                }

                inc() {
                    this.count++;
                    console.log(this.count);
                }
            }
            const c = new Counter();
            setTimeout(c.inc); // NaN
            setTimeout(() => c.inc()); // 1
        </code>
    </pre>

    <h3>4. this di Arrow Function</h3>
    <pre style="background: black; color: white;">
        <code>
            const obj = {
                myKey: "Test",
                normalFn: function () {
                    console.log("Normal function =>", this.myKey);
                },
                arrowFn: () => {
                    console.log("Arrow function =>", this.myKey);
                }
            };

            obj.normalFn(); // Test
            obj.arrowFn(); // undefined
        </code>
    </pre>

    <script src="1-global.js"></script>
    <script src="2-object-method.js"></script>
    <script src="3-class.js"></script>
    <script src="4-arrow-function.js"></script>
</body>
</html>